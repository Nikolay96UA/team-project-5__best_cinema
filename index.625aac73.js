!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("e3qpK"),r("b4pSS");var s=r("lIyNj"),i=(s=r("lIyNj"),document.querySelector("#uncoming-this-mounth"));function c(e){var t='<div class="img-div">\n    <img class="muvie-image-poster"\n        src="https://image.tmdb.org/t/p/original/'.concat(e.poster_path,'"\n        alt="" width="805" height="458">\n    <img class="muvie-image-backdrop"\n        src="https://image.tmdb.org/t/p/original/').concat(e.backdrop_path,'"\n        alt="" width="805" height="458">\n</div>\n\n<div class="meta-items-div">\n    <h2 class="muvie-name">').concat(e.title,'</h2>\n    <div class="meta-div">\n        <div class="meta-left">\n            <ul class="muvie-meta-left-criterions">\n                <li class="muvie-meta-item">\n                    <b class="criterion">Release date</b>\n                </li>\n                <li class="muvie-meta-item">\n                    <b class="criterion">Vote / Votes</b>\n                </li>\n            </ul>\n            <ul class="muvie-meta-left-data">\n                <li class="muvie-meta-item">\n                    <span class="date-number">').concat(e.release_date,'</span>\n                </li>\n                <li class="muvie-meta-item">\n                    <span class="vote-numbers">').concat(e.vote_average,'</span><span class="slash"> / </span><span\n                        class="vote-numbers">').concat(e.vote_count,'</span>\n                </li>\n            </ul>\n        </div>\n        <div class="meta-right">\n            <ul class="muvie-meta-right-criterions">\n                <li class="muvie-meta-item">\n                    <b class="criterion">Popularity</b>\n                </li>\n                <li class="muvie-meta-item">\n                    <b class="criterion">Genre</b>\n                </li>\n            </ul>\n            <ul class="muvie-meta-right-data">\n                <li class="muvie-meta-item">\n                    <span class="data">').concat(e.popularity,'</span>\n                </li>\n                <li class="muvie-meta-item">\n                    <span class="data">').concat(e.genres.map((function(e){return"".concat(e.name)})),'</span>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="muvie-description-item">\n        <b class="criterion about">About</b>\n        <p class="description">').concat(e.overview,'</p>\n    </div>\n\n    <button type="button" class="remind-btn">Remind me</button>\n</div>');i.insertAdjacentHTML("beforeend",t)}fetch("".concat(s.BASE_URL).concat(s.URL_TREND_DAY,"?api_key=").concat(s.API_KEY,"&page=1")).then((function(e){return e.json()})).then((function(e){return e.results[0].id})).then((function(e){fetch("".concat(s.BASE_URL,"movie/").concat(e,"?api_key=").concat(s.API_KEY,"&language=en-US")).then((function(e){return e.json()})).then(c)}));var o=r("bpxeT"),l=r("2TvXO"),u=(s=r("lIyNj"),r("dIxxU")),d=document.getElementById("trends-list"),p=[],m=[];function v(){return(v=e(o)(e(l).mark((function t(){var n,a,r,i,c,o;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:return n=e.sent,e.next=6,u.default.get("".concat(s.BASE_URL).concat(s.URL_GENRE_LIST,"?api_key=").concat(s.API_KEY));case 6:for(a=e.sent,r=a.data,i=n.slice(0,3),c=r.genres,o=0;o<c.length;o+=1)p.push(c[o].id),m.push(c[o].name);b(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return(g=e(o)(e(l).mark((function t(){var n,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get("".concat(s.BASE_URL).concat(s.URL_TREND_WEEK,"?api_key=").concat(s.API_KEY,"&page=").concat(1));case 3:return n=e.sent,a=n.data,e.abrupt("return",a.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function b(e){!function(e){d.innerHTML=e}(e.map((function(e){var t=e.title,n=e.genre_ids,a=e.release_date,r=e.poster_path,s=e.vote_average,i=e.id;return'\n        <li class="trends-card" style="background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), url(https://image.tmdb.org/t/p/w500'.concat(r,')" data-id=').concat(i,'>\n          <div class="trends-card-about">\n            <h3 class="trends-card-subtitle">').concat(t,'</h3>\n            <p class="trends-card-meta">\n              ').concat(function(e){for(var t=[],n=0;n<=e.length;n+=1)if(p.includes(e[n])){var a=p.indexOf(e[n]);t.push(m[a])}for(;t.length>2;)t.pop();return t.join(", ")}(n)," | ").concat(a.slice(0,4),'\n            </p>\n          </div>\n          <div class="vote-cinemas ').concat(function(e){if(10===e)return"ten-stars";if(e<10&&e>8)return"nine-stars";if(8===e)return"eight-stars";if(e<8&&e>6)return"seven-stars";if(6===e)return"six-stars";if(e<6&&e>4)return"five-stars";if(4===e)return"four-stars";if(e<4&&e>2)return"three-stars";if(2===e)return"two-stars";if(e<2&&e>0)return"one-star";if(0===e)return"zero-star";if(!e)return"No rating"}(Number(s.toFixed(1))),'">\n          </div>\n        </li>')})).join(""))}!function(){v.apply(this,arguments)}();var h=document.querySelector(".scroll-to-top");window.addEventListener("scroll",(function(){(window.pageYOffset||document.documentElement.scrollTop)>100?h.classList.add("scroll-to-top-activ"):h.classList.remove("scroll-to-top-activ")})),h.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));o=r("bpxeT"),l=r("2TvXO");var y,_=r("fC0zd"),w=document.querySelector("body"),L=document.querySelector("[data-close-modal]"),E=document.querySelector("[data-backdrop]"),x=(document.querySelector(".modal"),document.querySelector(".wrap")),k=(document.querySelector(".gallery"),new(0,_.MovieDatabaseAPI));function S(e){e.target===E&&I()}function T(){E.classList.remove("backdrop--hidden"),w.classList.add("modal-open")}function I(){E.classList.add("backdrop--hidden"),w.classList.remove("modal-open")}function A(){return(A=e(o)(e(l).mark((function t(n){var a,r,s,i,c;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.fetchMovieDetails(n);case 3:for(N(a=e.sent),r=document.querySelector(".add-to-library"),s=localStorage.getItem("library"),i=s?JSON.parse(s):[],c=0;c<i.length;c++)i[c].id===a.id&&(r.innerText="Delete from my library");r.addEventListener("click",(function(){if("Add to my library"===r.innerText)i.push(a),localStorage.setItem("library",JSON.stringify(i)),r.innerText="Delete from my library";else{var e=i.findIndex((function(e){return e.id===a.id}));-1!==e&&(i.splice(e,1),localStorage.setItem("library",JSON.stringify(i)),r.innerText="Add to my library")}})),T(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.dir(e.t0);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function N(e){var t=e.poster_path,n=e.original_title,a=e.vote_average,r=e.vote_count,s=e.popularity,i=e.genres,c=e.overview;y="\n    <div class='container-image-wrap'>".concat(t?'<img src="https://image.tmdb.org/t/p/w342/'.concat(t,'" alt="tizer">'):"","</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>").concat(n,"</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">").concat(a,'</span><span class="slash"> / </span><span class="vote-numbers">').concat(r,"</span></p>\n          <p class='feature-value'>").concat(s,"</p>\n          <p class='feature-value'>").concat(Object.values(i).map((function(e){return e.name})).join(" "),"</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>").concat(c,'</p>\n      <button class="add-to-library" type="button">Add to my library</button>\n    </div>\n    '),x.innerHTML=y}L.addEventListener("click",I),E.addEventListener("click",S),document.addEventListener("keydown",(function(e){"Escape"===e.key&&I()})),L.addEventListener("click",I),E.addEventListener("click",S),d.addEventListener("click",(function(e){if("LI"===e.target.nodeName){var t=e.target.dataset.id;console.log("Это LI!!!"),function(e){A.apply(this,arguments)}(t)}}))}();
//# sourceMappingURL=index.625aac73.js.map
