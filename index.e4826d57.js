!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("e3qpK"),r("b4pSS");var i=r("lIyNj"),s=(i=r("lIyNj"),document.querySelector("#uncoming-this-mounth"));function c(e){var t='<div class="img-div">\n    <img class="muvie-image-poster"\n        src="https://image.tmdb.org/t/p/original/'.concat(e.poster_path,'"\n        alt="" width="805" height="458">\n    <img class="muvie-image-backdrop"\n        src="https://image.tmdb.org/t/p/original/').concat(e.backdrop_path,'"\n        alt="" width="805" height="458">\n</div>\n\n<div class="meta-items-div">\n    <h2 class="muvie-name">').concat(e.title,'</h2>\n    <div class="meta-div">\n        <div class="meta-left">\n            <ul class="muvie-meta-left-criterions">\n                <li class="muvie-meta-item">\n                    <b class="criterion">Release date</b>\n                </li>\n                <li class="muvie-meta-item">\n                    <b class="criterion">Vote / Votes</b>\n                </li>\n            </ul>\n            <ul class="muvie-meta-left-data">\n                <li class="muvie-meta-item">\n                    <span class="date-number">').concat(e.release_date,'</span>\n                </li>\n                <li class="muvie-meta-item">\n                    <span class="vote-numbers">').concat(e.vote_average,'</span><span class="slash"> / </span><span\n                        class="vote-numbers">').concat(e.vote_count,'</span>\n                </li>\n            </ul>\n        </div>\n        <div class="meta-right">\n            <ul class="muvie-meta-right-criterions">\n                <li class="muvie-meta-item">\n                    <b class="criterion">Popularity</b>\n                </li>\n                <li class="muvie-meta-item">\n                    <b class="criterion">Genre</b>\n                </li>\n            </ul>\n            <ul class="muvie-meta-right-data">\n                <li class="muvie-meta-item">\n                    <span class="data">').concat(e.popularity,'</span>\n                </li>\n                <li class="muvie-meta-item">\n                    <span class="data">').concat(e.genres.map((function(e){return"".concat(e.name)})),'</span>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="muvie-description-item">\n        <b class="criterion about">About</b>\n        <p class="description">').concat(e.overview,'</p>\n    </div>\n\n    <button type="button" class="remind-btn">Remind me</button>\n</div>');s.insertAdjacentHTML("beforeend",t)}fetch("".concat(i.BASE_URL).concat(i.URL_TREND_DAY,"?api_key=").concat(i.API_KEY,"&page=1")).then((function(e){return e.json()})).then((function(e){return e.results[0].id})).then((function(e){fetch("".concat(i.BASE_URL,"movie/").concat(e,"?api_key=").concat(i.API_KEY,"&language=en-US")).then((function(e){return e.json()})).then(c)}));var o=r("bpxeT"),l=r("2TvXO"),u=(i=r("lIyNj"),r("dIxxU")),d=document.getElementById("trends-list"),p=[],v=[];function m(){return(m=e(o)(e(l).mark((function t(){var n,a,r,s,c,o;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:return n=e.sent,e.next=6,u.default.get("".concat(i.BASE_URL).concat(i.URL_GENRE_LIST,"?api_key=").concat(i.API_KEY));case 6:for(a=e.sent,r=a.data,s=n.slice(0,3),c=r.genres,o=0;o<c.length;o+=1)p.push(c[o].id),v.push(c[o].name);g(s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return(h=e(o)(e(l).mark((function t(){var n,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get("".concat(i.BASE_URL).concat(i.URL_TREND_WEEK,"?api_key=").concat(i.API_KEY,"&page=").concat(1));case 3:return n=e.sent,a=n.data,e.abrupt("return",a.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function g(e){!function(e){d.innerHTML=e}(e.map((function(e){var t=e.title,n=e.genre_ids,a=e.release_date,r=e.poster_path,i=e.vote_average,s=e.id;return'\n        <li class="trends-card" style="background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), url(https://image.tmdb.org/t/p/w500'.concat(r,')" data-id=').concat(s,'>\n          <div class="trends-card-about">\n            <h3 class="trends-card-subtitle">').concat(t,'</h3>\n            <p class="trends-card-meta">\n              ').concat(function(e){for(var t=[],n=0;n<=e.length;n+=1)if(p.includes(e[n])){var a=p.indexOf(e[n]);t.push(v[a])}for(;t.length>2;)t.pop();return t.join(", ")}(n)," | ").concat(a.slice(0,4),'\n            </p>\n          </div>\n          <div class="vote-cinemas ').concat(function(e){if(10===e)return"ten-stars";if(e<10&&e>8)return"nine-stars";if(8===e)return"eight-stars";if(e<8&&e>6)return"seven-stars";if(6===e)return"six-stars";if(e<6&&e>4)return"five-stars";if(4===e)return"four-stars";if(e<4&&e>2)return"three-stars";if(2===e)return"two-stars";if(e<2&&e>0)return"one-star";if(0===e)return"zero-star";if(!e)return"No rating"}(Number(i.toFixed(1))),'">\n          </div>\n        </li>')})).join(""))}!function(){m.apply(this,arguments)}(),r("6li5c");o=r("bpxeT"),l=r("2TvXO"),o=r("bpxeT");var b=r("8MBJY"),y=r("a2hTj");l=r("2TvXO"),u=r("dIxxU"),i=r("lIyNj");r("kDSvw");var w=function(){"use strict";function t(){e(b)(this,t)}return e(y)(t,[{key:"fetchMovieDetails",value:function(t){return e(o)(e(l).mark((function n(){var a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get("".concat(i.BASE_URL,"/movie/").concat(t,"?api_key=").concat(i.API_KEY,"&language=en-US"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),n,null,[[0,7]])})))()}}]),t}(),_=r("kDSvw"),k=document.querySelector("[data-close-modal]"),L=document.querySelector("[data-backdrop]"),x=(document.querySelector(".modal"),document.querySelector(".wrap"));!function(){if(localStorage.getItem("library"))return;localStorage.setItem("library","[]")}();var E,S=new w;function T(){L.classList.remove("backdrop--hidden")}function I(){L.classList.add("backdrop--hidden")}function A(){return(A=e(o)(e(l).mark((function t(n){var a,r,i,s,c;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.fetchMovieDetails(n);case 3:for(q(a=e.sent),console.log(a.id),r=document.querySelector(".add-to-library"),i=localStorage.getItem("library"),s=i?JSON.parse(i):[],c=0;c<s.length;c++)s[c].id===a.id&&(console.log("Match found!"),r.innerText="Delete from my library");r.addEventListener("click",(function(){if("Add to my library"===r.innerText)s.push(a),localStorage.setItem("library",JSON.stringify(s)),r.innerText="Delete from my library";else{var e=s.findIndex((function(e){return e.id===a.id}));-1!==e&&(s.splice(e,1),localStorage.setItem("library",JSON.stringify(s)),r.innerText="Add to my library")}})),console.log("Лог після циклу"),console.log(a),T(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.dir(e.t0);case 19:case"end":return e.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function q(e){var t=e.poster_path,n=e.original_title,a=e.vote_average,r=e.vote_count,i=e.popularity,s=e.genres,c=e.overview;E="\n    <div class='container-image-wrap'>".concat(t?'<img src="https://image.tmdb.org/t/p/w342/'.concat(t,'" alt="tizer">'):"","</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>").concat(n,"</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">").concat(a,'</span><span class="slash"> / </span><span class="vote-numbers">').concat(r,"</span></p>\n          <p class='feature-value'>").concat(i,"</p>\n          <p class='feature-value'>").concat(Object.values(s).map((function(e){return e.name})).join(" "),"</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>").concat(c,'</p>\n      <button class="add-to-library" type="button">Add to my library</button>\n    </div>\n    '),x.innerHTML=E}function N(e){if("LI"===e.target.nodeName){var t=e.target.dataset.id;console.log("Это LI!!!"),function(e){A.apply(this,arguments)}(t)}}k.addEventListener("click",I),L.addEventListener("click",(function(e){var t=e.target;if(console.log("You click on:",t),t!==L)return;I()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&I()})),_.galleryEl.addEventListener("click",N),d.addEventListener("click",N);o=r("bpxeT"),l=r("2TvXO");var R=r("AWYEZ"),U=document.querySelector(".hero"),j=document.querySelector(".iframe-trailer"),M=document.querySelector(".trailer-modal__backdrop"),O=document.querySelector(".trailer-modal__button-colse"),D=document.querySelector(".trailer-container"),Y=document.querySelector(".no-movie-container");function B(){return(B=e(o)(e(l).mark((function t(n){var a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=n.target).classList.contains("hero__btn")&&(K(),D.classList.remove("trailer-is-hidden"),Y.classList.add("trailer-is-hidden"),X(a.dataset.id));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function K(){document.body.classList.add("show-trailer-modal"),window.addEventListener("keydown",P),M.addEventListener("click",J),O.addEventListener("click",V)}function P(e){"Escape"===e.code&&V()}function J(e){e.target.classList.contains("trailer-modal__backdrop")&&V()}function V(){document.body.classList.remove("show-trailer-modal"),j.src="",window.removeEventListener("keydown",P),M.removeEventListener("click",J),O.removeEventListener("click",V),D.classList.add("trailer-is-hidden"),Y.classList.remove("trailer-is-hidden")}function X(e){return G.apply(this,arguments)}function G(){return(G=e(o)(e(l).mark((function t(n){var a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(n);case 2:a=e.sent,j.src="https://www.youtube.com/embed/".concat(a);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function H(e){return z.apply(this,arguments)}function z(){return(z=e(o)(e(l).mark((function t(n){var a,r,i,s,c;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,R.getMovieTrailer)(n);case 3:if(r=e.sent,0,i=r.results.length,s=Math.floor(Math.random()*(i-0+1))+0,c=null===(a=r.results[s])||void 0===a?void 0:a.key){e.next=12;break}return D.classList.add("trailer-is-hidden"),Y.classList.remove("trailer-is-hidden"),e.abrupt("return");case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}U.addEventListener("click",(function(e){return B.apply(this,arguments)}))}();
//# sourceMappingURL=index.e4826d57.js.map
