{"mappings":"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","sources":["src/library.js","src/js/components/modals/modal-pop-up-library.js","src/js/libraries.js"],"sourcesContent":["import './js/components/header';\nimport './js/components/scroll-to-top';\nimport './js/components/modals/modal-pop-up-library';\nimport './js/libraries';\n","import { MovieDatabaseAPI } from '../../utils/fetchMovieDetails';\n// import { weekTrendsEl } from '../trends';\n// import { movieListContainer } from '../../libraries';\n\nconst libraryEl = document.querySelector('.movie-list');\n\nconst body = document.querySelector('body');\nconst closeModalBtn = document.querySelector('[data-close-modal]');\nconst backdrop = document.querySelector('[data-backdrop]');\nconst modalPopUp = document.querySelector('.modal');\nconst container = document.querySelector('.wrap');\nconst galleryEl = document.querySelector('.gallery');\n// const weekTrendsEl = document.getElementById('trends-list');\nconst movieListContainer = document.querySelector('.movie');\n\nconst movieDatabaseAPI = new MovieDatabaseAPI();\nlet detailMarkup;\n\n// form.addEventListener('submit', fetchDetailInfo);\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\ndocument.addEventListener('keydown', function (e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n});\n\nfunction closeByBackdrop(e) {\n  const currentEl = e.target;\n  if (currentEl !== backdrop) {\n    return;\n  } else {\n    closeModal();\n  }\n}\n\nfunction openModal() {\n  backdrop.classList.remove('backdrop--hidden');\n  body.classList.add('modal-open');\n  // closeModalBtn.removeEventListener('click', closeModal);\n  // backdrop.removeEventListener('click', closeByBackdrop);\n}\n\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\n\nfunction closeModal() {\n  backdrop.classList.add('backdrop--hidden');\n  body.classList.remove('modal-open');\n  // galleryEl.removeEventListener('click', onGalleryLinkClick);\n}\n\nasync function fetchDetailInfo(movieId) {\n  try {\n    const result = await movieDatabaseAPI.fetchMovieDetails(movieId);\n    renderDetailMarkup(result);\n\n    const addToLibraryBtn = document.querySelector('.add-to-library');\n\n    const library = localStorage.getItem('library');\n    const localStorageData = library ? JSON.parse(library) : [];\n\n    for (let i = 0; i < localStorageData.length; i++) {\n      const id = localStorageData[i].id;\n      if (id === result.id) {\n        addToLibraryBtn.innerText = 'Delete from my library';\n      }\n    }\n\n    addToLibraryBtn.addEventListener('click', () => {\n      if (addToLibraryBtn.innerText === 'Add to my library') {\n        localStorageData.push(result);\n        localStorage.setItem('library', JSON.stringify(localStorageData));\n        addToLibraryBtn.innerText = 'Delete from my library';\n      } else {\n        const index = localStorageData.findIndex(item => item.id === result.id);\n        if (index !== -1) {\n          localStorageData.splice(index, 1);\n          localStorage.setItem('library', JSON.stringify(localStorageData));\n          addToLibraryBtn.innerText = 'Add to my library';\n        }\n      }\n    });\n\n    openModal();\n  } catch (error) {\n    console.dir(error);\n  }\n}\n\nfunction renderDetailMarkup({\n  poster_path,\n  original_title,\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview,\n}) {\n  detailMarkup = `\n    <div class='container-image-wrap'>${\n      poster_path ? `<img src=\"https://image.tmdb.org/t/p/w342/${poster_path}\" alt=\"tizer\">` : ''\n    }</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>${original_title}</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">${vote_average}</span><span class=\"slash\"> / </span><span class=\"vote-numbers\">${vote_count}</span></p>\n          <p class='feature-value'>${popularity}</p>\n          <p class='feature-value'>${Object.values(genres)\n            .map(genre => genre.name)\n            .join(' ')}</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>${overview}</p>\n      <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    </div>\n    `;\n  container.innerHTML = detailMarkup;\n}\n\n// galleryEl.addEventListener('click', onGalleryLinkClick);\nlibraryEl.addEventListener('click', onGalleryLinkClick);\n\nfunction onGalleryLinkClick(event) {\n  if (event.target.nodeName === 'LI') {\n    const movieId = event.target.dataset.id;\n    // console.log('Это LI!!!');\n    fetchDetailInfo(movieId);\n  }\n}\n","// import * as basicLightbox from 'basiclightbox';\n// import SimpleLightbox from 'simplelightbox';\n// import Pagination from 'tui-pagination';\n\nconst movieListContainer = document.querySelector('.movie-list');\n// export const movieListContainer1 = document.querySelector('.movie-list gallery');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const errorContainer = document.querySelector('.library__error-message');\n  const buttonContainer = document.querySelector('.container-button');\n  const movieListContainer = document.querySelector('.movie-list');\n  const storedMovies = localStorage.getItem('library');\n  const movies = storedMovies ? JSON.parse(storedMovies) : [];\n  console.log(movies);\n  if (movies.length > 0) {\n    errorContainer.remove();\n    buttonContainer.remove();\n    renderMovies(movies);\n  } else {\n    const errorMessage = document.createElement('p');\n    errorMessage.classList.add('error-line');\n    errorMessage.innerHTML = `\n      OOPS...<br />\n      We are very sorry!<br />\n      You don’t have any movies at your library.\n    `;\n    errorContainer.appendChild(errorMessage);\n  }\n  function renderMovies(movies) {\n    movieListContainer.innerHTML = '';\n    movies.forEach((movie, index) => {\n      const movieElement = document.createElement('li');\n      movieElement.classList.add('movie');\n      movieElement.innerHTML = renderDetailMarkup(movie);\n      movieListContainer.appendChild(movieElement);\n      if ((index + 1) % 3 === 0) {\n        movieElement.classList.add('last-in-row');\n      }\n    });\n  }\n  function renderDetailMarkup({\n    poster_path,\n    original_title,\n    vote_average,\n    vote_count,\n    popularity,\n    genres,\n    overview,\n    title,\n    genre_ids,\n    release_date,\n    id,\n  }) {\n    const posterImage = poster_path\n      ? `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"Poster\">`\n      : '';\n    let urlPoster = `url('https://image.tmdb.org/t/p/w500${poster_path}')`;\n    const genreNames = genres.map(genre => genre.name).join(' ');\n    // return `\n    //   <div class='container-image-wrap'>\n    //     ${posterImage}\n    //   </div>\n    //   <div class='container-content-wrap'>\n    //     <h3 class='title'>${original_title}</h3>\n    //     <div class='content-wrap'>\n    //       <div class='features-wrap'>\n    //         <p class='feature-name'>Vote / Votes</p>\n    //         <p class='feature-name'>Popularity</p>\n    //         <p class='feature-name'>Genre</p>\n    //       </div>\n    //       <div class='features-values-wrap'>\n    //         <p class='feature-value'>${vote_average}<span> / </span>${vote_count}</p>\n    //         <p class='feature-value'>${popularity}</p>\n    //         <p class='feature-value'>${genreNames}</p>\n    //       </div>\n    //     </div>\n    //     <p class='feature-name feature-name-uppercase'>About</p>\n    //     <p class='feature-value feature-value-description'>${overview}</p>\n    //     <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    //   </div>\n    // `;\n    return `\n    <div class=\"lib-gallery-item\" style=\"background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), ${urlPoster}\" data-id=${id}>\n    <div class=\"lib-gallery-item__about\">\n    <h3 class=\"lib-gallery-item__about__title\">${title}</h3>\n    <p class=\"lib-gallery-item__about__p\">${genreNames} | ${release_date.slice(\n      0,\n      4\n    )}</p>\n    </div>\n    <div class=\"vote-cinemas ${stars(Number(vote_average.toFixed(1)))}\"></div>\n    </div>`;\n  }\n});\nfunction getGenreForCard(genreIds) {\n  const genreArr = [];\n  for (let i = 0; i <= genreIds.length; i += 1) {\n    if (idsArray.includes(genreIds[i])) {\n      const indx = idsArray.indexOf(genreIds[i]);\n      genreArr.push(categorysArray[indx]);\n    }\n  }\n  while (genreArr.length > 2) {\n    genreArr.pop();\n  }\n  return genreArr.join(', ');\n}\nfunction stars(vote) {\n  if (vote === 10) {\n    return 'ten-stars';\n  } else if (vote < 10 && vote > 8) {\n    return 'nine-stars';\n  } else if (vote === 8) {\n    return 'eight-stars';\n  } else if (vote < 8 && vote > 6) {\n    return 'seven-stars';\n  } else if (vote === 6) {\n    return 'six-stars';\n  } else if (vote < 6 && vote > 4) {\n    return 'five-stars';\n  } else if (vote === 4) {\n    return 'four-stars';\n  } else if (vote < 4 && vote > 2) {\n    return 'three-stars';\n  } else if (vote === 2) {\n    return 'two-stars';\n  } else if (vote < 2 && vote > 0) {\n    return 'one-star';\n  } else if (vote === 0) {\n    return 'zero-star';\n  } else if (!vote) {\n    return 'No rating';\n  }\n}\n"],"names":["parcelRequire","$32c3da4a07e07667$var$detailMarkup","$bpxeT","$32c3da4a07e07667$var$libraryEl","document","querySelector","$32c3da4a07e07667$var$body","$32c3da4a07e07667$var$closeModalBtn","$32c3da4a07e07667$var$backdrop","$32c3da4a07e07667$var$container","$32c3da4a07e07667$var$movieDatabaseAPI","$fC0zd","MovieDatabaseAPI","$32c3da4a07e07667$var$closeByBackdrop","e","target","$32c3da4a07e07667$var$closeModal","$32c3da4a07e07667$var$openModal","classList","remove","add","$32c3da4a07e07667$var$_fetchDetailInfo","$parcel$interopDefault","$2TvXO","mark","_callee","movieId","result","addToLibraryBtn","library","localStorageData","i","fetchMovieDetails","$32c3da4a07e07667$var$renderDetailMarkup","_ctx","sent","localStorage","getItem","JSON","parse","length","id","innerText","addEventListener","push","setItem","stringify","index","findIndex","item","splice","console","dir","t0","apply","this","arguments","param","poster_path","original_title","vote_average","vote_count","popularity","genres","overview","concat","Object","values","map","genre","name","join","innerHTML","key","event","nodeName","$32c3da4a07e07667$var$fetchDetailInfo","dataset","movies","errorContainer","buttonContainer","movieListContainer1","storedMovies","movies1","log","forEach","movie","vote","title","release_date","urlPoster","genreNames","movieElement","createElement","genre_ids","slice","Number","toFixed","appendChild","errorMessage"],"version":3,"file":"library.7cccd57a.js.map"}