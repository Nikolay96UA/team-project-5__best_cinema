!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("e3qpK"),r("6li5c");var o,i=r("bpxeT"),s=r("2TvXO"),c=r("fC0zd"),l=document.querySelector(".movie-list"),d=document.querySelector("body"),u=document.querySelector("[data-close-modal]"),p=document.querySelector("[data-backdrop]"),v=(document.querySelector(".modal"),document.querySelector(".wrap")),m=(document.querySelector(".gallery"),new(0,c.MovieDatabaseAPI));function f(e){e.target===p&&g()}function y(){p.classList.remove("backdrop--hidden"),d.classList.add("modal-open")}function g(){p.classList.add("backdrop--hidden"),d.classList.remove("modal-open")}function b(){return(b=e(i)(e(s).mark((function t(n){var a,r,o,i,c;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.fetchMovieDetails(n);case 3:for(h(a=e.sent),r=document.querySelector(".add-to-library"),o=localStorage.getItem("library"),i=o?JSON.parse(o):[],c=0;c<i.length;c++)i[c].id===a.id&&(r.innerText="Delete from my library");r.addEventListener("click",(function(){if("Add to my library"===r.innerText)i.push(a),localStorage.setItem("library",JSON.stringify(i)),r.innerText="Delete from my library";else{var e=i.findIndex((function(e){return e.id===a.id}));-1!==e&&(i.splice(e,1),localStorage.setItem("library",JSON.stringify(i)),r.innerText="Add to my library")}})),y(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.dir(e.t0);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function h(e){var t=e.poster_path,n=e.original_title,a=e.vote_average,r=e.vote_count,i=e.popularity,s=e.genres,c=e.overview;o="\n    <div class='container-image-wrap'>".concat(t?'<img src="https://image.tmdb.org/t/p/w342/'.concat(t,'" alt="tizer">'):"","</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>").concat(n,"</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">").concat(a,'</span><span class="slash"> / </span><span class="vote-numbers">').concat(r,"</span></p>\n          <p class='feature-value'>").concat(i,"</p>\n          <p class='feature-value'>").concat(Object.values(s).map((function(e){return e.name})).join(" "),"</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>").concat(c,'</p>\n      <button class="add-to-library" type="button">Add to my library</button>\n    </div>\n    '),v.innerHTML=o}u.addEventListener("click",g),p.addEventListener("click",f),document.addEventListener("keydown",(function(e){"Escape"===e.key&&g()})),u.addEventListener("click",g),p.addEventListener("click",f),l.addEventListener("click",(function(e){if("LI"===e.target.nodeName){!function(e){b.apply(this,arguments)}(e.target.dataset.id)}}));document.querySelector(".movie-list");document.addEventListener("DOMContentLoaded",(function(){var e,t=document.querySelector(".library__error-message"),n=document.querySelector(".container-button"),a=document.querySelector(".movie-list"),r=localStorage.getItem("library"),o=r?JSON.parse(r):[];if(console.log(o),o.length>0)t.remove(),n.remove(),e=o,a.innerHTML="",e.forEach((function(e,t){var n,r,o,i,s,c,l,d,u,p,v=document.createElement("li");v.classList.add("movie"),v.innerHTML=(o=(r=e).poster_path,r.original_title,i=r.vote_average,r.vote_count,r.popularity,s=r.genres,r.overview,c=r.title,r.genre_ids,l=r.release_date,d=r.id,o&&'<img src="https://image.tmdb.org/t/p/w500'.concat(o,'" alt="Poster">'),u="url('https://image.tmdb.org/t/p/w500".concat(o,"')"),p=s.map((function(e){return e.name})).join(" "),'\n    <div class="lib-gallery-item" style="background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), '.concat(u,'" data-id=').concat(d,'>\n    <div class="lib-gallery-item__about">\n    <h3 class="lib-gallery-item__about__title">').concat(c,'</h3>\n    <p class="lib-gallery-item__about__p">').concat(p," | ").concat(l.slice(0,4),'</p>\n    </div>\n    <div class="vote-cinemas ').concat(10===(n=Number(i.toFixed(1)))?"ten-stars":n<10&&n>8?"nine-stars":8===n?"eight-stars":n<8&&n>6?"seven-stars":6===n?"six-stars":n<6&&n>4?"five-stars":4===n?"four-stars":n<4&&n>2?"three-stars":2===n?"two-stars":n<2&&n>0?"one-star":0===n?"zero-star":n?void 0:"No rating",'"></div>\n    </div>')),a.appendChild(v),(t+1)%3==0&&v.classList.add("last-in-row")}));else{var i=document.createElement("p");i.classList.add("error-line"),i.innerHTML="\n      OOPS...<br />\n      We are very sorry!<br />\n      You donâ€™t have any movies at your library.\n    ",t.appendChild(i)}}))}();
//# sourceMappingURL=library.47914cd9.js.map
