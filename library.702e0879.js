var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=r),r("alV1T"),r("2yFDX");var n=r("8YI3L");const s=document.querySelector(".movie-list"),i=document.querySelector("body"),o=document.querySelector("[data-close-modal]"),l=document.querySelector("[data-backdrop]"),d=(document.querySelector(".modal"),document.querySelector(".wrap")),c=(document.querySelector(".gallery"),new(0,n.MovieDatabaseAPI));let u;function p(e){e.target===l&&m()}function m(){l.classList.add("backdrop--hidden"),i.classList.remove("modal-open")}async function v(e){try{const t=await c.fetchMovieDetails(e);!function({poster_path:e,original_title:t,vote_average:a,vote_count:r,popularity:n,genres:s,overview:i}){u=`\n    <div class='container-image-wrap'>${e?`<img src="https://image.tmdb.org/t/p/w342/${e}" alt="tizer">`:""}</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>${t}</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class="vote-numbers">${a}</span><span class="slash"> / </span><span class="vote-numbers">${r}</span></p>\n          <p class='feature-value'>${n}</p>\n          <p class='feature-value'>${Object.values(s).map((e=>e.name)).join(" ")}</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>${i}</p>\n      <button class="add-to-library" type="button">Add to my library</button>\n    </div>\n    `,d.innerHTML=u}(t);const a=document.querySelector(".add-to-library"),r=localStorage.getItem("library"),n=r?JSON.parse(r):[];for(let e=0;e<n.length;e++){n[e].id===t.id&&(a.innerText="Delete from my library")}a.addEventListener("click",(()=>{if("Add to my library"===a.innerText)n.push(t),localStorage.setItem("library",JSON.stringify(n)),a.innerText="Delete from my library";else{const e=n.findIndex((e=>e.id===t.id));-1!==e&&(n.splice(e,1),localStorage.setItem("library",JSON.stringify(n)),a.innerText="Add to my library")}})),l.classList.remove("backdrop--hidden"),i.classList.add("modal-open")}catch(e){console.dir(e)}}o.addEventListener("click",m),l.addEventListener("click",p),document.addEventListener("keydown",(function(e){"Escape"===e.key&&m()})),o.addEventListener("click",m),l.addEventListener("click",p),s.addEventListener("click",(function(e){if("DIV"===e.target.nodeName){v(e.target.dataset.id)}}));document.querySelector(".movie-list");document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".library__error-message"),t=document.querySelector(".container-button"),a=document.querySelector(".movie-list"),r=localStorage.getItem("library"),n=r?JSON.parse(r):[];if(console.log(n),n.length>0)e.remove(),t.remove(),s=n,a.innerHTML="",s.forEach(((e,t)=>{const r=document.createElement("li");r.classList.add("movie"),r.innerHTML=function({poster_path:e,original_title:t,vote_average:a,vote_count:r,popularity:n,genres:s,overview:i,title:o,genre_ids:l,release_date:d,id:c}){let u=`url('https://image.tmdb.org/t/p/w500${e}')`;const p=s.map((e=>e.name)).join(" ");return`\n    <div class="lib-gallery-item" style="background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), ${u}" data-id=${c}>\n    <div class="lib-gallery-item__about">\n    <h3 class="lib-gallery-item__about__title">${o}</h3>\n    <p class="lib-gallery-item__about__p">${p} | ${d.slice(0,4)}</p>\n    </div>\n    <div class="vote-cinemas ${m=Number(a.toFixed(1)),10===m?"ten-stars":m<10&&m>8?"nine-stars":8===m?"eight-stars":m<8&&m>6?"seven-stars":6===m?"six-stars":m<6&&m>4?"five-stars":4===m?"four-stars":m<4&&m>2?"three-stars":2===m?"two-stars":m<2&&m>0?"one-star":0===m?"zero-star":m?void 0:"No rating"}"></div>\n    </div>`;var m}(e),a.appendChild(r),(t+1)%3==0&&r.classList.add("last-in-row")}));else{const t=document.createElement("p");t.classList.add("error-line"),t.innerHTML="\n      OOPS...<br />\n      We are very sorry!<br />\n      You donâ€™t have any movies at your library.\n    ",e.appendChild(t)}var s}));
//# sourceMappingURL=library.702e0879.js.map
