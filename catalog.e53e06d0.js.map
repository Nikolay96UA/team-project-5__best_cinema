{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,yCCIsBE,SAASC,cAAc,sBAA7C,MACMC,EAAWF,SAASC,cAAc,mBAElCE,GADQH,SAASC,cAAc,UACnBD,SAASC,cAAc,UAEnCG,EAAmB,IDJzB,MAKAC,wBAAwBC,GACtB,IAIE,aAHuBP,EAAAQ,QAAMC,IAC3B,GAAGC,EAAAC,kBAAkBJ,aAAmBG,EAAAE,2BAE1BC,I,CAChB,MAAOC,GACPC,QAAQD,MAAMA,E,EAXhBE,cAAc,GCIhB,IAAIC,EASJX,eAAeY,EAAgBX,GAC/B,IAII,MAAMY,QAAed,EAAiBe,kBAAkBb,IAoC5D,UAA4Bc,YAACA,EAAWC,eAAEA,EAAcC,aAAEA,EAAYC,WAAEA,EAAUC,WAAEA,EAAUC,OAAEA,EAAMC,SAAEA,IACpGV,EAAe,2CACqBI,EAAc,4CAA4CA,kBAA8B,iFAEpGC,0WAQeC,oBAA+BC,mDAC/BC,mDACAG,OAAOC,OAAOH,GAAQI,KAAIC,GAASA,EAAMC,OAAMC,KAAK,8KAIlCN,qZAYzDvB,EAAU8B,UAAYjB,C,CAhEtBkB,CAAmBhB,GACnBJ,QAAQqB,IAAIjB,GAXZhB,EAASkC,UAAUC,OAAO,oBAgB1B,MAAMC,EAAkBtC,SAASC,cAAc,mBAC/CsC,aAAaC,QAAQ,YAAcC,KAAKC,MAAMH,aAAaC,QAAQ,YAAYG,SAASzB,KACxFoB,EAAgBM,UAAY,0BAI9BN,EAAgBO,iBAAiB,SAAS,KACxC,MAAMC,EAAUP,aAAaC,QAAQ,WAAaC,KAAKC,MAAMH,aAAaC,QAAQ,YAAc,GAEhG,GAAkC,sBAA9BF,EAAgBM,UAClBE,EAAQC,KAAK7B,GACbqB,aAAaS,QAAQ,UAAWP,KAAKQ,UAAUH,IAC/CR,EAAgBM,UAAY,6BACvB,CACL,MAAMM,EAAQJ,EAAQK,WAAWC,GAASA,EAAKrB,OAASb,EAAOa,QACjD,IAAVmB,IACFJ,EAAQO,OAAOH,EAAO,GACtBX,aAAaS,QAAQ,UAAWP,KAAKQ,UAAUH,IAC/CR,EAAgBM,UAAY,oB,KAKlC,MAAO/B,GACLC,QAAQwC,IAAIzC,E,EAqChB0C,EAAAC,UAAUX,iBAAiB,SAE3B,SAA4BY,GAC1B,GAA8B,OAA1BA,EAAMC,OAAOC,SAAmB,CAElC1C,EADgBwC,EAAMC,OAAOE,QAAQC,G","sources":["src/js/catalog.js","src/js/utils/fetchMovieDetails.js","src/js/components/modal-pop-up.js"],"sourcesContent":["import './components/gallery';\nimport './components/pagination';\nimport './components/modal-pop-up';","import axios from 'axios';\nimport { API_KEY, BASE_URL } from '../constants/api';\n// import { renderOnError } from '../components/hero';\nimport { onGalleryLinkClick } from '../components/gallery';\n\nclass MovieDatabaseAPI{\n  constructor() {\n  }\n\n  // Function to fetch detail info from TMDB API\nasync fetchMovieDetails(movieId) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    // renderOnError();\n  }\n}\n}\n\nexport {MovieDatabaseAPI};","import { MovieDatabaseAPI } from '../utils/fetchMovieDetails';\n// import { onGalleryLinkClick } from '../components/gallery';\nimport {galleryEl} from '../components/gallery';\n\nconst closeModalBtn = document.querySelector('[data-close-modal]');\nconst backdrop = document.querySelector('[data-backdrop]');\nconst modal = document.querySelector('.modal');\nconst container = document.querySelector('.wrap');\n\nconst movieDatabaseAPI = new MovieDatabaseAPI();\nlet detailMarkup;\n\n// form.addEventListener('submit', fetchDetailInfo);\n// closeModalBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n    backdrop.classList.toggle('backdrop--hidden');\n}\n\nasync function fetchDetailInfo(movieId) {\ntry{\n    // e.preventDefault();\n    // movieDatabaseAPI.query = e.currentTarget.elements.searchQuery.value;\n    // console.log(movieDatabaseAPI.query);\n    const result = await movieDatabaseAPI.fetchMovieDetails(movieId);\n    // const secondResult = await fetchGenreDetails(result.genres.id);\n    renderDetailMarkup(result);\n    console.log(result);\n    // const renderMarkup = renderDetailMarkup(result);\n    // console.log(renderMarkup);\n    toggleModal();\n\n    const addToLibraryBtn = document.querySelector('.add-to-library');\nif (localStorage.getItem(\"library\") && JSON.parse(localStorage.getItem(\"library\")).includes(result)) {\n    addToLibraryBtn.innerText = \"Delete from my library\";\n  }\n  \n  // Add or remove object from library\n  addToLibraryBtn.addEventListener(\"click\", () => {\n    const library = localStorage.getItem(\"library\") ? JSON.parse(localStorage.getItem(\"library\")) : [];\n  \n    if (addToLibraryBtn.innerText === \"Add to my library\") {\n      library.push(result);\n      localStorage.setItem(\"library\", JSON.stringify(library));\n      addToLibraryBtn.innerText = \"Delete from my library\";\n    } else {\n      const index = library.findIndex((item) => item.name === result.name);\n      if (index !== -1) {\n        library.splice(index, 1);\n        localStorage.setItem(\"library\", JSON.stringify(library));\n        addToLibraryBtn.innerText = \"Add to my library\";\n      }\n    }\n  });\n    \n} catch (error) {\n    console.dir(error);\n}\n}\n\nfunction renderDetailMarkup({poster_path, original_title, vote_average, vote_count, popularity, genres, overview}) {\n    detailMarkup = `\n    <div class='container-image-wrap'>${poster_path ? `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"tizer\">` : ''}</div>\n    <div class='container-content-wrap'>\n        <h3 class='title'>${original_title}</h3>\n        <div class='content-wrap'>\n            <div class='features-wrap'>\n                <p class='feature-name'>Vote / Votes</p>\n                <p class='feature-name'>Popularity</p>\n                <p class='feature-name'>Genre</p>\n            </div>\n            <div class='features-values-wrap'>\n                <p class='feature-value'>${vote_average}<span> / </span>${vote_count}</p>\n                <p class='feature-value'>${popularity}</p>\n                <p class='feature-value'>${Object.values(genres).map(genre => genre.name).join(\" \")}</p>\n            </div>\n        </div>\n        <p class='feature-name feature-name-uppercase'>About</p>\n        <p class='feature-value feature-value-description'>${overview}</p>\n        <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    </div>\n    <button class=\"close-modal\" type=\"button\" data-close-modal>\n          <svg width=\"24px\" height=\"24px\">\n            <use\n              class=\"close-modal__icon-close\"\n              href=\"./images/icons/symbol-defs.svg#close-button\"\n            ></use>\n          </svg>\n        </button>\n    `;\n    container.innerHTML = detailMarkup;\n}\n\ngalleryEl.addEventListener('click', onGalleryLinkClick);\n\nfunction onGalleryLinkClick(event) {\n  if (event.target.nodeName === 'LI') {\n    const movieId = event.target.dataset.id;\n    fetchDetailInfo(movieId);\n  }\n}\n\nexport {fetchDetailInfo};\n"],"names":["parcelRequire","$2shzp","document","querySelector","$612ceba0ab50b927$var$backdrop","$612ceba0ab50b927$var$container","$612ceba0ab50b927$var$movieDatabaseAPI","async","movieId","default","get","$g5NAz","BASE_URL","API_KEY","data","error","console","constructor","$612ceba0ab50b927$var$detailMarkup","$612ceba0ab50b927$export$67ac821cb1f1fa91","result","fetchMovieDetails","poster_path","original_title","vote_average","vote_count","popularity","genres","overview","Object","values","map","genre","name","join","innerHTML","$612ceba0ab50b927$var$renderDetailMarkup","log","classList","toggle","addToLibraryBtn","localStorage","getItem","JSON","parse","includes","innerText","addEventListener","library","push","setItem","stringify","index","findIndex","item","splice","dir","$3Nna8","galleryEl","event","target","nodeName","dataset","id"],"version":3,"file":"catalog.e53e06d0.js.map"}