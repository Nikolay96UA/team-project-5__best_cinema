{"mappings":"oeAAAA,EAAA,SCAA,MACMC,EAAWC,SAASC,cAAc,kBAIxCC,OAAOC,iBAAiB,UAAU,MAFbD,OAAOE,aAAeJ,SAASK,gBAAgBC,WAHrD,IAOXP,EAASQ,UAAUC,IAAI,uBAEvBT,EAASQ,UAAUE,OAAO,sBAAsB,IAIpDV,EAASI,iBAAiB,SAAS,KACjCD,OAAOQ,SAAS,CACdC,IAAK,EACLC,SAAU,UACV,ICjBJ,IAAAC,EAAAf,EAAA,SAIA,MAAMgB,EAAYd,SAASC,cAAc,eAEnCc,EAAOf,SAASC,cAAc,QAC9Be,EAAgBhB,SAASC,cAAc,sBACvCgB,EAAWjB,SAASC,cAAc,mBAElCiB,GADalB,SAASC,cAAc,UACxBD,SAASC,cAAc,UAKnCkB,GAJYnB,SAASC,cAAc,YAEdD,SAASC,cAAc,UAEzB,IAAI,EAAAY,EAAAO,mBAC7B,IAAIC,EAWJ,SAASC,EAAgBC,GACLA,EAAEC,SACFP,GAGhBQ,G,CAcJ,SAASA,IACPR,EAASV,UAAUC,IAAI,oBACvBO,EAAKR,UAAUE,OAAO,a,CAIxBiB,eAAeC,EAAgBC,GAC7B,IACE,MAAMC,QAAeV,EAAiBW,kBAAkBF,IAoC5D,UAA4BG,YAC1BA,EAAWC,eACXA,EAAcC,aACdA,EAAYC,WACZA,EAAUC,WACVA,EAAUC,OACVA,EAAMC,SACNA,IAEAhB,EAAe,2CAEXU,EAAc,6CAA6CA,kBAA8B,+EAGrEC,+VAQsCC,oEAA+EC,oDAC1GC,6CACAG,OAAOC,OAAOH,GACtCI,KAAIC,GAASA,EAAMC,OACnBC,KAAK,oKAIyCN,yGAIzDnB,EAAU0B,UAAYvB,C,CArEpBwB,CAAmBhB,GAEnB,MAAMiB,EAAkB9C,SAASC,cAAc,mBAEzC8C,EAAUC,aAAaC,QAAQ,WAC/BC,EAAmBH,EAAUI,KAAKC,MAAML,GAAW,GAEzD,IAAK,IAAIM,EAAI,EAAGA,EAAIH,EAAiBI,OAAQD,IAAK,CACrCH,EAAiBG,GAAGE,KACpB1B,EAAO0B,KAChBT,EAAgBU,UAAY,yB,CAIhCV,EAAgB3C,iBAAiB,SAAS,KACxC,GAAkC,sBAA9B2C,EAAgBU,UAClBN,EAAiBO,KAAK5B,GACtBmB,aAAaU,QAAQ,UAAWP,KAAKQ,UAAUT,IAC/CJ,EAAgBU,UAAY,6BACvB,CACL,MAAMI,EAAQV,EAAiBW,WAAUC,GAAQA,EAAKP,KAAO1B,EAAO0B,MACtD,IAAVK,IACFV,EAAiBa,OAAOH,EAAO,GAC/BZ,aAAaU,QAAQ,UAAWP,KAAKQ,UAAUT,IAC/CJ,EAAgBU,UAAY,oB,KA1CpCvC,EAASV,UAAUE,OAAO,oBAC1BM,EAAKR,UAAUC,IAAI,a,CA+CjB,MAAOwD,GACPC,QAAQC,IAAIF,E,EAnEhBhD,EAAcb,iBAAiB,QAASsB,GACxCR,EAASd,iBAAiB,QAASmB,GACnCtB,SAASG,iBAAiB,WAAW,SAAUoB,GAC/B,WAAVA,EAAE4C,KACJ1C,G,IAoBJT,EAAcb,iBAAiB,QAASsB,GACxCR,EAASd,iBAAiB,QAASmB,GAoFnCR,EAAUX,iBAAiB,SAE3B,SAA4BiE,GAE1B,GADAH,QAAQI,IAAID,EAAM5C,QACY,OAA1B4C,EAAM5C,OAAO8C,SAAmB,CAGlC3C,EAFgByC,EAAM5C,OAAO+C,QAAQhB,G,KCjIdvD,SAASC,cAAc,eAGlDD,SAASG,iBAAiB,oBAAoB,KAC5C,MAAMqE,EAAiBxE,SAASC,cAAc,2BACxCwE,EAAkBzE,SAASC,cAAc,qBACzCyE,EAAqB1E,SAASC,cAAc,eAC5C0E,EAAe3B,aAAaC,QAAQ,WACpC2B,EAASD,EAAexB,KAAKC,MAAMuB,GAAgB,GAEzD,GADAV,QAAQI,IAAIO,GACRA,EAAOtB,OAAS,EAClBkB,EAAe/D,SACfgE,EAAgBhE,SAYIoE,EAXPD,EAYbF,EAAmB9B,UAAY,GAC/BiC,EAAOC,SAAQ,CAACC,EAAOnB,KACrB,MAAMoB,EAAehF,SAASiF,cAAc,MAC5CD,EAAazE,UAAUC,IAAI,SAC3BwE,EAAapC,UAOjB,UAA4Bb,YAC1BA,EAAWC,eACXA,EAAcC,aACdA,EAAYC,WACZA,EAAUC,WACVA,EAAUC,OACVA,EAAMC,SACNA,EAAQ6C,MACRA,EAAKC,UACLA,EAASC,aACTA,EAAY7B,GACZA,IAKA,IAAI8B,EAAY,uCAAuCtD,MACvD,MAAMuD,EAAalD,EAAOI,KAAIC,GAASA,EAAMC,OAAMC,KAAK,KAwBxD,MAAO,6IAC+H0C,cAAsB9B,iGAE/G2B,qDACLI,OAAgBF,EAAaG,MACnE,EACA,oDAoBSC,EAjBsBC,OAAOxD,EAAayD,QAAQ,IAkBlD,KAATF,EACK,YACEA,EAAO,IAAMA,EAAO,EACtB,aACW,IAATA,EACF,cACEA,EAAO,GAAKA,EAAO,EACrB,cACW,IAATA,EACF,YACEA,EAAO,GAAKA,EAAO,EACrB,aACW,IAATA,EACF,aACEA,EAAO,GAAKA,EAAO,EACrB,cACW,IAATA,EACF,YACEA,EAAO,GAAKA,EAAO,EACrB,WACW,IAATA,EACF,YACGA,OAAL,EACE,kCAxBX,IAAeA,C,CA1EgBG,CAAmBZ,GAC5CL,EAAmBkB,YAAYZ,IAC1BpB,EAAQ,GAAK,GAAM,GACtBoB,EAAazE,UAAUC,IAAI,cAAc,QAlBxC,CACL,MAAMqF,EAAe7F,SAASiF,cAAc,KAC5CY,EAAatF,UAAUC,IAAI,cAC3BqF,EAAajD,UAAY,gHAKzB4B,EAAeoB,YAAYC,E,CAE7B,IAAsBhB,C","sources":["src/library.js","src/js/components/scroll-to-top.js","src/js/components/modals/modal-pop-up-library.js","src/js/libraries.js"],"sourcesContent":["import './js/components/header';\nimport './js/components/scroll-to-top';\nimport './js/components/modals/modal-pop-up-library';\nimport './js/libraries';\n","const offset = 100;\nconst scrollUp = document.querySelector('.scroll-to-top');\n\nconst getTop = () => window.pageYOffset || document.documentElement.scrollTop;\n\nwindow.addEventListener('scroll', () => {\n  if (getTop() > offset) {\n    scrollUp.classList.add('scroll-to-top-activ');\n  } else {\n    scrollUp.classList.remove('scroll-to-top-activ');\n  }\n});\n\nscrollUp.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n","import { MovieDatabaseAPI } from '../../utils/fetchMovieDetails';\n// import { weekTrendsEl } from '../trends';\n// import { movieListContainer } from '../../libraries';\n\nconst libraryEl = document.querySelector('.movie-list');\n\nconst body = document.querySelector('body');\nconst closeModalBtn = document.querySelector('[data-close-modal]');\nconst backdrop = document.querySelector('[data-backdrop]');\nconst modalPopUp = document.querySelector('.modal');\nconst container = document.querySelector('.wrap');\nconst galleryEl = document.querySelector('.gallery');\n// const weekTrendsEl = document.getElementById('trends-list');\nconst movieListContainer = document.querySelector('.movie');\n\nconst movieDatabaseAPI = new MovieDatabaseAPI();\nlet detailMarkup;\n\n// form.addEventListener('submit', fetchDetailInfo);\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\ndocument.addEventListener('keydown', function (e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n});\n\nfunction closeByBackdrop(e) {\n  const currentEl = e.target;\n  if (currentEl !== backdrop) {\n    return;\n  } else {\n    closeModal();\n  }\n}\n\nfunction openModal() {\n  backdrop.classList.remove('backdrop--hidden');\n  body.classList.add('modal-open');\n  // closeModalBtn.removeEventListener('click', closeModal);\n  // backdrop.removeEventListener('click', closeByBackdrop);\n}\n\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\n\nfunction closeModal() {\n  backdrop.classList.add('backdrop--hidden');\n  body.classList.remove('modal-open');\n  // galleryEl.removeEventListener('click', onGalleryLinkClick);\n}\n\nasync function fetchDetailInfo(movieId) {\n  try {\n    const result = await movieDatabaseAPI.fetchMovieDetails(movieId);\n    renderDetailMarkup(result);\n\n    const addToLibraryBtn = document.querySelector('.add-to-library');\n\n    const library = localStorage.getItem('library');\n    const localStorageData = library ? JSON.parse(library) : [];\n\n    for (let i = 0; i < localStorageData.length; i++) {\n      const id = localStorageData[i].id;\n      if (id === result.id) {\n        addToLibraryBtn.innerText = 'Delete from my library';\n      }\n    }\n\n    addToLibraryBtn.addEventListener('click', () => {\n      if (addToLibraryBtn.innerText === 'Add to my library') {\n        localStorageData.push(result);\n        localStorage.setItem('library', JSON.stringify(localStorageData));\n        addToLibraryBtn.innerText = 'Delete from my library';\n      } else {\n        const index = localStorageData.findIndex(item => item.id === result.id);\n        if (index !== -1) {\n          localStorageData.splice(index, 1);\n          localStorage.setItem('library', JSON.stringify(localStorageData));\n          addToLibraryBtn.innerText = 'Add to my library';\n        }\n      }\n    });\n\n    openModal();\n  } catch (error) {\n    console.dir(error);\n  }\n}\n\nfunction renderDetailMarkup({\n  poster_path,\n  original_title,\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview,\n}) {\n  detailMarkup = `\n    <div class='container-image-wrap'>${\n      poster_path ? `<img src=\"https://image.tmdb.org/t/p/w342/${poster_path}\" alt=\"tizer\">` : ''\n    }</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>${original_title}</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">${vote_average}</span><span class=\"slash\"> / </span><span class=\"vote-numbers\">${vote_count}</span></p>\n          <p class='feature-value'>${popularity}</p>\n          <p class='feature-value'>${Object.values(genres)\n            .map(genre => genre.name)\n            .join(' ')}</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>${overview}</p>\n      <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    </div>\n    `;\n  container.innerHTML = detailMarkup;\n}\n\n// galleryEl.addEventListener('click', onGalleryLinkClick);\nlibraryEl.addEventListener('click', onGalleryLinkClick);\n\nfunction onGalleryLinkClick(event) {\n  console.log(event.target);\n  if (event.target.nodeName === 'LI') {\n    const movieId = event.target.dataset.id;\n    // console.log('Это LI!!!');\n    fetchDetailInfo(movieId);\n  }\n}\n","// import * as basicLightbox from 'basiclightbox';\n// import SimpleLightbox from 'simplelightbox';\n// import Pagination from 'tui-pagination';\n\nconst movieListContainer = document.querySelector('.movie-list');\n// export const movieListContainer1 = document.querySelector('.movie-list gallery');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const errorContainer = document.querySelector('.library__error-message');\n  const buttonContainer = document.querySelector('.container-button');\n  const movieListContainer = document.querySelector('.movie-list');\n  const storedMovies = localStorage.getItem('library');\n  const movies = storedMovies ? JSON.parse(storedMovies) : [];\n  console.log(movies);\n  if (movies.length > 0) {\n    errorContainer.remove();\n    buttonContainer.remove();\n    renderMovies(movies);\n  } else {\n    const errorMessage = document.createElement('p');\n    errorMessage.classList.add('error-line');\n    errorMessage.innerHTML = `\n      OOPS...<br />\n      We are very sorry!<br />\n      You don’t have any movies at your library.\n    `;\n    errorContainer.appendChild(errorMessage);\n  }\n  function renderMovies(movies) {\n    movieListContainer.innerHTML = '';\n    movies.forEach((movie, index) => {\n      const movieElement = document.createElement('li');\n      movieElement.classList.add('movie');\n      movieElement.innerHTML = renderDetailMarkup(movie);\n      movieListContainer.appendChild(movieElement);\n      if ((index + 1) % 3 === 0) {\n        movieElement.classList.add('last-in-row');\n      }\n    });\n  }\n  function renderDetailMarkup({\n    poster_path,\n    original_title,\n    vote_average,\n    vote_count,\n    popularity,\n    genres,\n    overview,\n    title,\n    genre_ids,\n    release_date,\n    id,\n  }) {\n    const posterImage = poster_path\n      ? `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"Poster\">`\n      : '';\n    let urlPoster = `url('https://image.tmdb.org/t/p/w500${poster_path}')`;\n    const genreNames = genres.map(genre => genre.name).join(' ');\n    // return `\n    //   <div class='container-image-wrap'>\n    //     ${posterImage}\n    //   </div>\n    //   <div class='container-content-wrap'>\n    //     <h3 class='title'>${original_title}</h3>\n    //     <div class='content-wrap'>\n    //       <div class='features-wrap'>\n    //         <p class='feature-name'>Vote / Votes</p>\n    //         <p class='feature-name'>Popularity</p>\n    //         <p class='feature-name'>Genre</p>\n    //       </div>\n    //       <div class='features-values-wrap'>\n    //         <p class='feature-value'>${vote_average}<span> / </span>${vote_count}</p>\n    //         <p class='feature-value'>${popularity}</p>\n    //         <p class='feature-value'>${genreNames}</p>\n    //       </div>\n    //     </div>\n    //     <p class='feature-name feature-name-uppercase'>About</p>\n    //     <p class='feature-value feature-value-description'>${overview}</p>\n    //     <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    //   </div>\n    // `;\n    return `\n    <div class=\"lib-gallery-item\" style=\"background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), ${urlPoster}\" data-id=${id}>\n    <div class=\"lib-gallery-item__about\">\n    <h3 class=\"lib-gallery-item__about__title\">${title}</h3>\n    <p class=\"lib-gallery-item__about__p\">${genreNames} | ${release_date.slice(\n      0,\n      4\n    )}</p>\n    </div>\n    <div class=\"vote-cinemas ${stars(Number(vote_average.toFixed(1)))}\"></div>\n    </div>`;\n  }\n});\nfunction getGenreForCard(genreIds) {\n  const genreArr = [];\n  for (let i = 0; i <= genreIds.length; i += 1) {\n    if (idsArray.includes(genreIds[i])) {\n      const indx = idsArray.indexOf(genreIds[i]);\n      genreArr.push(categorysArray[indx]);\n    }\n  }\n  while (genreArr.length > 2) {\n    genreArr.pop();\n  }\n  return genreArr.join(', ');\n}\nfunction stars(vote) {\n  if (vote === 10) {\n    return 'ten-stars';\n  } else if (vote < 10 && vote > 8) {\n    return 'nine-stars';\n  } else if (vote === 8) {\n    return 'eight-stars';\n  } else if (vote < 8 && vote > 6) {\n    return 'seven-stars';\n  } else if (vote === 6) {\n    return 'six-stars';\n  } else if (vote < 6 && vote > 4) {\n    return 'five-stars';\n  } else if (vote === 4) {\n    return 'four-stars';\n  } else if (vote < 4 && vote > 2) {\n    return 'three-stars';\n  } else if (vote === 2) {\n    return 'two-stars';\n  } else if (vote < 2 && vote > 0) {\n    return 'one-star';\n  } else if (vote === 0) {\n    return 'zero-star';\n  } else if (!vote) {\n    return 'No rating';\n  }\n}\n"],"names":["parcelRequire","$1dcf0f4b4dee14cd$var$scrollUp","document","querySelector","window","addEventListener","pageYOffset","documentElement","scrollTop","classList","add","remove","scrollTo","top","behavior","$8YI3L","$0be37af022da9fb3$var$libraryEl","$0be37af022da9fb3$var$body","$0be37af022da9fb3$var$closeModalBtn","$0be37af022da9fb3$var$backdrop","$0be37af022da9fb3$var$container","$0be37af022da9fb3$var$movieDatabaseAPI","MovieDatabaseAPI","$0be37af022da9fb3$var$detailMarkup","$0be37af022da9fb3$var$closeByBackdrop","e","target","$0be37af022da9fb3$var$closeModal","async","$0be37af022da9fb3$var$fetchDetailInfo","movieId","result","fetchMovieDetails","poster_path","original_title","vote_average","vote_count","popularity","genres","overview","Object","values","map","genre","name","join","innerHTML","$0be37af022da9fb3$var$renderDetailMarkup","addToLibraryBtn","library","localStorage","getItem","localStorageData","JSON","parse","i","length","id","innerText","push","setItem","stringify","index","findIndex","item","splice","error","console","dir","key","event","log","nodeName","dataset","errorContainer","buttonContainer","movieListContainer1","storedMovies","movies1","movies","forEach","movie","movieElement","createElement","title","genre_ids","release_date","urlPoster","genreNames","slice","vote","Number","toFixed","renderDetailMarkup","appendChild","errorMessage"],"version":3,"file":"library.e71c247d.js.map"}