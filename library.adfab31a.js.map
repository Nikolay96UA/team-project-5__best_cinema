{"mappings":"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","sources":["src/library.js","src/js/components/modals/modal-pop-up-library.js","src/js/libraries.js"],"sourcesContent":["import './js/components/header';\nimport './js/components/scroll-to-top';\nimport './js/components/modals/modal-pop-up-library';\nimport './js/libraries';\n","import { MovieDatabaseAPI } from '../../utils/fetchMovieDetails';\n// import { weekTrendsEl } from '../trends';\n// import { movieListContainer } from '../../libraries';\n\nconst libraryEl = document.querySelector('.movie-list');\nconst body = document.querySelector('body');\nconst closeModalBtn = document.querySelector('[data-close-modal]');\nconst backdrop = document.querySelector('[data-backdrop]');\nconst modalPopUp = document.querySelector('.modal');\nconst container = document.querySelector('.wrap');\nconst galleryEl = document.querySelector('.gallery');\n\nconst movieDatabaseAPI = new MovieDatabaseAPI();\nlet detailMarkup;\n\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\ndocument.addEventListener('keydown', function (e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n});\n\nfunction closeByBackdrop(e) {\n  const currentEl = e.target;\n  if (currentEl !== backdrop) {\n    return;\n  } else {\n    closeModal();\n  }\n}\n\nfunction openModal() {\n  backdrop.classList.remove('backdrop--hidden');\n  body.classList.add('modal-open');\n}\n\ncloseModalBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', closeByBackdrop);\n\nfunction closeModal() {\n  backdrop.classList.add('backdrop--hidden');\n  body.classList.remove('modal-open');\n}\n\nasync function fetchDetailInfo(movieId) {\n  try {\n    const result = await movieDatabaseAPI.fetchMovieDetails(movieId);\n    renderDetailMarkup(result);\n\n    const addToLibraryBtn = document.querySelector('.add-to-library');\n\n    const library = localStorage.getItem('library');\n    const localStorageData = library ? JSON.parse(library) : [];\n\n    for (let i = 0; i < localStorageData.length; i++) {\n      const id = localStorageData[i].id;\n      if (id === result.id) {\n        addToLibraryBtn.innerText = 'Delete from my library';\n      }\n    }\n\n    addToLibraryBtn.addEventListener('click', () => {\n      if (addToLibraryBtn.innerText === 'Add to my library') {\n        localStorageData.push(result);\n        localStorage.setItem('library', JSON.stringify(localStorageData));\n        addToLibraryBtn.innerText = 'Delete from my library';\n      } else {\n        const index = localStorageData.findIndex(item => item.id === result.id);\n        if (index !== -1) {\n          localStorageData.splice(index, 1);\n          localStorage.setItem('library', JSON.stringify(localStorageData));\n          addToLibraryBtn.innerText = 'Add to my library';\n        }\n      }\n    });\n\n    openModal();\n  } catch (error) {\n    console.dir(error);\n  }\n}\n\nfunction renderDetailMarkup({\n  poster_path,\n  original_title,\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview,\n}) {\n  detailMarkup = `\n    <div class='container-image-wrap'>${\n      poster_path\n        ? `<img src=\"https://image.tmdb.org/t/p/w342/${poster_path}\" alt=\"tizer\">`\n        : ''\n    }</div>\n    <div class='container-content-wrap'>\n      <h3 class='title'>${original_title}</h3>\n      <div class='content-wrap'>\n        <div class='features-wrap'>\n          <p class='feature-name'>Vote / Votes</p>\n          <p class='feature-name'>Popularity</p>\n          <p class='feature-name'>Genre</p>\n        </div>\n        <div class='features-values-wrap'>\n          <p class='feature-value'><span class=\"vote-numbers\">${vote_average}</span><span class=\"slash\"> / </span><span class=\"vote-numbers\">${vote_count}</span></p>\n          <p class='feature-value'>${popularity}</p>\n          <p class='feature-value'>${Object.values(genres)\n            .map(genre => genre.name)\n            .join(' ')}</p>\n        </div>\n      </div>\n      <p class='feature-name feature-name-uppercase'>About</p>\n      <p class='feature-value feature-value-description'>${overview}</p>\n      <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    </div>\n    `;\n  container.innerHTML = detailMarkup;\n}\n\nlibraryEl.addEventListener('click', onGalleryLinkClick);\n\nfunction onGalleryLinkClick(event) {\n  if (event.target.nodeName === 'LI') {\n    const movieId = event.target.dataset.id;\n    fetchDetailInfo(movieId);\n  }\n}\n","const movieListContainer = document.querySelector('.movie-list');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const errorContainer = document.querySelector('.library__error-message');\n  const buttonContainer = document.querySelector('.container-button');\n  const movieListContainer = document.querySelector('.movie-list');\n  const storedMovies = localStorage.getItem('library');\n  const movies = storedMovies ? JSON.parse(storedMovies) : [];\n  console.log(movies);\n  if (movies.length > 0) {\n    errorContainer.remove();\n    buttonContainer.remove();\n    renderMovies(movies);\n  } else {\n    const errorMessage = document.createElement('p');\n    errorMessage.classList.add('error-line');\n    errorMessage.innerHTML = `\n      OOPS...<br />\n      We are very sorry!<br />\n      You donâ€™t have any movies at your library.\n    `;\n    errorContainer.appendChild(errorMessage);\n  }\n  function renderMovies(movies) {\n    movieListContainer.innerHTML = '';\n    movies.forEach((movie, index) => {\n      const movieElement = document.createElement('li');\n      movieElement.classList.add('movie');\n      movieElement.innerHTML = renderDetailMarkup(movie);\n      movieListContainer.appendChild(movieElement);\n      if ((index + 1) % 3 === 0) {\n        movieElement.classList.add('last-in-row');\n      }\n    });\n  }\n  function renderDetailMarkup({\n    poster_path,\n    original_title,\n    vote_average,\n    vote_count,\n    popularity,\n    genres,\n    overview,\n    title,\n    genre_ids,\n    release_date,\n    id,\n  }) {\n    const posterImage = poster_path\n      ? `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"Poster\">`\n      : '';\n    let urlPoster = `url('https://image.tmdb.org/t/p/w500${poster_path}')`;\n    const genreNames = genres.map(genre => genre.name).join(' ');\n    return `\n    <div class=\"lib-gallery-item\" style=\"background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%), ${urlPoster}\" data-id=${id}>\n    <div class=\"lib-gallery-item__about\">\n    <h3 class=\"lib-gallery-item__about__title\">${title}</h3>\n    <p class=\"lib-gallery-item__about__p\">${genreNames} | ${release_date.slice(\n      0,\n      4\n    )}</p>\n    </div>\n    <div class=\"vote-cinemas ${stars(Number(vote_average.toFixed(1)))}\"></div>\n    </div>`;\n  }\n});\nfunction getGenreForCard(genreIds) {\n  const genreArr = [];\n  for (let i = 0; i <= genreIds.length; i += 1) {\n    if (idsArray.includes(genreIds[i])) {\n      const indx = idsArray.indexOf(genreIds[i]);\n      genreArr.push(categorysArray[indx]);\n    }\n  }\n  while (genreArr.length > 2) {\n    genreArr.pop();\n  }\n  return genreArr.join(', ');\n}\nfunction stars(vote) {\n  if (vote === 10) {\n    return 'ten-stars';\n  } else if (vote < 10 && vote > 8) {\n    return 'nine-stars';\n  } else if (vote === 8) {\n    return 'eight-stars';\n  } else if (vote < 8 && vote > 6) {\n    return 'seven-stars';\n  } else if (vote === 6) {\n    return 'six-stars';\n  } else if (vote < 6 && vote > 4) {\n    return 'five-stars';\n  } else if (vote === 4) {\n    return 'four-stars';\n  } else if (vote < 4 && vote > 2) {\n    return 'three-stars';\n  } else if (vote === 2) {\n    return 'two-stars';\n  } else if (vote < 2 && vote > 0) {\n    return 'one-star';\n  } else if (vote === 0) {\n    return 'zero-star';\n  } else if (!vote) {\n    return 'No rating';\n  }\n}\n"],"names":["parcelRequire","$8YI3L","$0be37af022da9fb3$var$libraryEl","document","querySelector","$0be37af022da9fb3$var$body","$0be37af022da9fb3$var$closeModalBtn","$0be37af022da9fb3$var$backdrop","$0be37af022da9fb3$var$container","$0be37af022da9fb3$var$movieDatabaseAPI","MovieDatabaseAPI","$0be37af022da9fb3$var$detailMarkup","$0be37af022da9fb3$var$closeByBackdrop","e","target","$0be37af022da9fb3$var$closeModal","classList","add","remove","async","$0be37af022da9fb3$var$fetchDetailInfo","movieId","result","fetchMovieDetails","poster_path","original_title","vote_average","vote_count","popularity","genres","overview","Object","values","map","genre","name","join","innerHTML","$0be37af022da9fb3$var$renderDetailMarkup","addToLibraryBtn","library","localStorage","getItem","localStorageData","JSON","parse","i","length","id","innerText","addEventListener","push","setItem","stringify","index","findIndex","item","splice","error","console","dir","key","event","nodeName","dataset","errorContainer","buttonContainer","movieListContainer1","storedMovies","movies1","log","movies","forEach","movie","movieElement","createElement","title","genre_ids","release_date","urlPoster","genreNames","slice","vote","Number","toFixed","renderDetailMarkup","appendChild","errorMessage"],"version":3,"file":"library.adfab31a.js.map"}