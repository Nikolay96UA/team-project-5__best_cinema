{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,gBCAAC,EAAAD,EAAA,S,6EAKA,IDKIE,ECLJC,EAkBG,W,sBAlBGC,I,6BAKAC,IAAA,oB,MAAN,SAAwBC,G,OAAxBC,EAAAN,EAAA,CAAAM,EAAAC,GAAAC,MAAA,SAAAC,I,IAEUC,E,2FAAiBC,EAAAC,QAAMC,IAC3B,GAAqBC,OAAlBC,EAAAC,SAAS,WAA4BF,OAAnBT,EAAQ,aAAmBS,OAARC,EAAAE,QAAQ,oB,cAD5CP,EAAQQ,EAAAC,K,kBAGPT,EAASU,M,gCAEhBC,QAAQC,MAAKJ,EAAAK,I,wDAPjB,E,OAaG,G,aDlBGC,GADgBC,SAASC,cAAc,sBAC5BD,SAASC,cAAc,oBAElCC,GADQF,SAASC,cAAc,UACnBD,SAASC,cAAc,UAEnCE,EAAmB,IAAI1B,EAM7B,SAAS2B,IACLL,EAASM,UAAUC,OAAO,mB,UAGfC,I,OAAAA,EAAf1B,EAAAN,EAAA,CAAAM,EAAAC,GAAAC,MAAA,SAAAC,EAA+BJ,G,IAKrB4B,EAQAC,E,2FAReN,EAAiBO,kBAAkB9B,G,OAExD+B,EAFMH,EAAMf,EAAAC,MAGZE,QAAQgB,IAAIJ,GAGZJ,IAEMK,EAAkBT,SAASC,cAAc,mBAC/CY,aAAaC,QAAQ,YAAcC,KAAKC,MAAMH,aAAaC,QAAQ,YAAYG,SAAST,KACxFC,EAAgBS,UAAY,0BAI9BT,EAAgBU,iBAAiB,SAAS,WACxC,IAAMC,EAAUP,aAAaC,QAAQ,WAAaC,KAAKC,MAAMH,aAAaC,QAAQ,YAAc,GAEhG,GAAkC,sBAA9BL,EAAgBS,UAClBE,EAAQC,KAAKb,GACbK,aAAaS,QAAQ,UAAWP,KAAKQ,UAAUH,IAC/CX,EAAgBS,UAAY,6BACvB,CACL,IAAMM,EAAQJ,EAAQK,WAAU,SAACC,G,OAASA,EAAKC,OAASnB,EAAOmB,I,KACjD,IAAVH,IACFJ,EAAQQ,OAAOJ,EAAO,GACtBX,aAAaS,QAAQ,UAAWP,KAAKQ,UAAUH,IAC/CX,EAAgBS,UAAY,oB,uDAMhCtB,QAAQiC,IAAGpC,EAAAK,I,2DArCegC,MAAAC,KAAAC,U,CAyC9B,SAASrB,EAAmBsB,G,IAACC,EAADD,EAACC,YAAaC,EAAdF,EAAcE,eAAgBC,EAA9BH,EAA8BG,aAAcC,EAA5CJ,EAA4CI,WAAYC,EAAxDL,EAAwDK,WAAYC,EAApEN,EAAoEM,OAAQC,EAA5EP,EAA4EO,SACpGhE,EAAe,2CAGSa,OAFY6C,EAAc,4CAAwD7C,OAAZ6C,EAAY,kBAAkB,GAAG,gFAUxF7C,OARf8C,EAAe,0WAQ+B9C,OAA/B+C,EAAa,oBACb/C,OAD+BgD,EAAW,mDAE1ChD,OADAiD,EAAW,mDAKOjD,OAJlBoD,OAAOC,OAAOH,GAAQI,KAAI,SAAAC,G,OAASA,EAAMjB,I,IAAMkB,KAAK,KAAK,2KAI9BxD,OAATmD,EAAS,qZAYlEtC,EAAU4C,UAAYtE,C,CAG1BuE,EAAAC,UAAU7B,iBAAiB,SAE3B,SAA4B8B,GAC1B,GAA8B,OAA1BA,EAAMC,OAAOC,SAAmB,E,SA7EPvE,GAAhB2B,EAAeuB,MAAAC,KAAAC,U,CA+E1BoB,CADgBH,EAAMC,OAAOG,QAAQC,G","sources":["src/js/catalog.js","src/js/components/modal-pop-up.js","src/js/utils/fetchMovieDetails.js"],"sourcesContent":["import './components/gallery';\nimport './components/pagination';\nimport './components/modal-pop-up';","import { MovieDatabaseAPI } from '../utils/fetchMovieDetails';\n// import { onGalleryLinkClick } from '../components/gallery';\nimport {galleryEl} from '../components/gallery';\n\nconst closeModalBtn = document.querySelector('[data-close-modal]');\nconst backdrop = document.querySelector('[data-backdrop]');\nconst modal = document.querySelector('.modal');\nconst container = document.querySelector('.wrap');\n\nconst movieDatabaseAPI = new MovieDatabaseAPI();\nlet detailMarkup;\n\n// form.addEventListener('submit', fetchDetailInfo);\n// closeModalBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n    backdrop.classList.toggle('backdrop--hidden');\n}\n\nasync function fetchDetailInfo(movieId) {\ntry{\n    // e.preventDefault();\n    // movieDatabaseAPI.query = e.currentTarget.elements.searchQuery.value;\n    // console.log(movieDatabaseAPI.query);\n    const result = await movieDatabaseAPI.fetchMovieDetails(movieId);\n    // const secondResult = await fetchGenreDetails(result.genres.id);\n    renderDetailMarkup(result);\n    console.log(result);\n    // const renderMarkup = renderDetailMarkup(result);\n    // console.log(renderMarkup);\n    toggleModal();\n\n    const addToLibraryBtn = document.querySelector('.add-to-library');\nif (localStorage.getItem(\"library\") && JSON.parse(localStorage.getItem(\"library\")).includes(result)) {\n    addToLibraryBtn.innerText = \"Delete from my library\";\n  }\n  \n  // Add or remove object from library\n  addToLibraryBtn.addEventListener(\"click\", () => {\n    const library = localStorage.getItem(\"library\") ? JSON.parse(localStorage.getItem(\"library\")) : [];\n  \n    if (addToLibraryBtn.innerText === \"Add to my library\") {\n      library.push(result);\n      localStorage.setItem(\"library\", JSON.stringify(library));\n      addToLibraryBtn.innerText = \"Delete from my library\";\n    } else {\n      const index = library.findIndex((item) => item.name === result.name);\n      if (index !== -1) {\n        library.splice(index, 1);\n        localStorage.setItem(\"library\", JSON.stringify(library));\n        addToLibraryBtn.innerText = \"Add to my library\";\n      }\n    }\n  });\n    \n} catch (error) {\n    console.dir(error);\n}\n}\n\nfunction renderDetailMarkup({poster_path, original_title, vote_average, vote_count, popularity, genres, overview}) {\n    detailMarkup = `\n    <div class='container-image-wrap'>${poster_path ? `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"tizer\">` : ''}</div>\n    <div class='container-content-wrap'>\n        <h3 class='title'>${original_title}</h3>\n        <div class='content-wrap'>\n            <div class='features-wrap'>\n                <p class='feature-name'>Vote / Votes</p>\n                <p class='feature-name'>Popularity</p>\n                <p class='feature-name'>Genre</p>\n            </div>\n            <div class='features-values-wrap'>\n                <p class='feature-value'>${vote_average}<span> / </span>${vote_count}</p>\n                <p class='feature-value'>${popularity}</p>\n                <p class='feature-value'>${Object.values(genres).map(genre => genre.name).join(\" \")}</p>\n            </div>\n        </div>\n        <p class='feature-name feature-name-uppercase'>About</p>\n        <p class='feature-value feature-value-description'>${overview}</p>\n        <button class=\"add-to-library\" type=\"button\">Add to my library</button>\n    </div>\n    <button class=\"close-modal\" type=\"button\" data-close-modal>\n          <svg width=\"24px\" height=\"24px\">\n            <use\n              class=\"close-modal__icon-close\"\n              href=\"./images/icons/symbol-defs.svg#close-button\"\n            ></use>\n          </svg>\n        </button>\n    `;\n    container.innerHTML = detailMarkup;\n}\n\ngalleryEl.addEventListener('click', onGalleryLinkClick);\n\nfunction onGalleryLinkClick(event) {\n  if (event.target.nodeName === 'LI') {\n    const movieId = event.target.dataset.id;\n    fetchDetailInfo(movieId);\n  }\n}\n\nexport {fetchDetailInfo};\n","import axios from 'axios';\nimport { API_KEY, BASE_URL } from '../constants/api';\n// import { renderOnError } from '../components/hero';\nimport { onGalleryLinkClick } from '../components/gallery';\n\nclass MovieDatabaseAPI{\n  constructor() {\n  }\n\n  // Function to fetch detail info from TMDB API\nasync fetchMovieDetails(movieId) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    // renderOnError();\n  }\n}\n}\n\nexport {MovieDatabaseAPI};"],"names":["parcelRequire","$bpxeT","$c8d0c05ce664ed94$var$detailMarkup","$b5dad83a5435f19f$export$f1dd75fcc2a6c47a","MovieDatabaseAPI","key","movieId","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","default","get","concat","$lIyNj","BASE_URL","API_KEY","_ctx","sent","data","console","error","t0","$c8d0c05ce664ed94$var$backdrop","document","querySelector","$c8d0c05ce664ed94$var$container","$c8d0c05ce664ed94$var$movieDatabaseAPI","$c8d0c05ce664ed94$var$toggleModal","classList","toggle","$c8d0c05ce664ed94$var$_fetchDetailInfo","result","addToLibraryBtn","fetchMovieDetails","$c8d0c05ce664ed94$var$renderDetailMarkup","log","localStorage","getItem","JSON","parse","includes","innerText","addEventListener","library","push","setItem","stringify","index","findIndex","item","name","splice","dir","apply","this","arguments","param","poster_path","original_title","vote_average","vote_count","popularity","genres","overview","Object","values","map","genre","join","innerHTML","$kDSvw","galleryEl","event","target","nodeName","$c8d0c05ce664ed94$export$67ac821cb1f1fa91","dataset","id"],"version":3,"file":"catalog.02eee149.js.map"}